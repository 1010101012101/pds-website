{% comment %}

		to use this template assign a table name, table description, and next-release date as you want them displayed, 
		and a yaml file that lists the releases, for example see cassini_cirs_access.yaml 

		like so:

					{% assign table_name = "Cassini CIRS" %}
					{% assign description = "Cassini CIRS Access Original" %}
					{% assign releases = site.data.tables['cassini_cirs_access_orig'] %}
					{% include cassini_tables.html %}		

{% endcomment %}

{% assign columns = releases[0].columns %}
		
<table summary ="A list of {{ table_name }}">
	<caption class = "hidden">{{ table_name }}</caption>

  <thead>
		<tr>
			{% for col in columns %}
				<th scope="col" id="{{ col | slugify }}">{{ col }}</th>
			{% endfor %}
		</tr>
	</thead>

		{% for volume in releases %}
			
			{% if volume.columns %}
				{% continue %}
			{% endif %}

			<tbody>

				<!-- volume group separator rows -->
				{% if volume.release.date %}
					<tr>
						<th class="colgroup-seperator" colspan="7" id="release-{{ volume.release.date | slugify }}" scope="colgroup">
							{{ volume.release.date  }} Release
						</th>
					</tr>
				{% endif %}

				{% if volume.release.heading %}
					<tr>
						<th class="colgroup-seperator" colspan="7" id="{{ volume.release.heading | slugify}}" scope="colgroup">
							{{ volume.release.heading }}
						</th>
					</tr>
				{% endif %}


				{% comment %}
					table cells by column. Column names are defined in the yaml file that is called with this template
					see cassini.README.md to find or edit the list of allowed column names 
					to add a new column, add a new <td> data column element below and edit cassini.README.md 
				{% endcomment %}

				{% for row in volume.release.volumes %}

					{% assign instrument = row.volume.id | split: '_' %}
					{% capture base_dir %}{{ instrument[0] }}_{{ instrument[1] | split: "" | first }}xxx{% endcapture %}

					<tr>
						{% for col in columns %}


							<!-- data columns --> 

							<!-- Volume ID -->
							{% if col == "Volume Id" %}
								<td headers="{{ col | slugify }} release-{{ volume.release.date | slugify}} {{ volume.release.heading | slugify}}">
									{% if volume.release.nolinks == true %}		
											{{ row.volume.id }}
									{% else %}
										<a href = "http://pds-rings.seti.org/vol/{{ base_dir }}/{{ row.volume.id }}">
											{{ row.volume.id }}
										</a>
									{% endif %}
								</td>
							{% endif %}


							<!-- Bundled Volumes -->
							{% if col == "Bundled Volumes" %}
								<td headers="{{ col | slugify }} release-{{ volume.release.date | slugify}} {{ volume.release.heading | slugify}}">
									{% if volume.release.nolinks == true %}		
											{{ row.volume.id }}.tar.gz
									{% else %}
										<a href = "http://pds-rings.seti.org/archives/{{ base_dir }}/{{ row.volume.id }}.tar.gz">
												{{ row.volume.id }}.tar.gz
										</a>
									{% endif %}
								</td>
							{% endif %}


							<!-- Browse Images -->
							{% if col == "Browse Images" %}
								<td headers="{{ col | slugify }} release-{{ volume.release.date | slugify}} {{ volume.release.heading | slugify}}">

									{% if volume.release.nolinks == true %}		
											{{ col }}
									{% else %}
										<a href = "http://pds-rings.seti.org/browse/{{ base_dir }}/{{ row.volume.id }}/data/">
												{{ col }}
										</a>
									{% endif %}

								</td>
							{% endif %}


							<!-- Calibrated Images -->
							{% if col == "Calibrated Images" %}
								<td headers="{{ col | slugify }} release-{{ volume.release.date | slugify}} {{ volume.release.heading | slugify}}">

									{% if volume.release.nolinks == true %}		
											{{ col }}
									{% else %}
										<a href = "http://pds-rings.seti.org/derived/{{ base_dir }}/{{ row.volume.id }}/data/">
												{{ col }}
										</a>
									{% endif %}

								</td>
							{% endif %}


							<!-- Footprint Link -->
							{% if col == "Footprint Link" %}
								<td headers="{{ col | slugify }} release-{{ volume.release.date | slugify}} {{ volume.release.heading | slugify}}">

									{% if volume.release.nolinks == true %}		
											Footprints
									{% else %}
										<a href = "http://pds-rings.seti.org/browse/{{ base_dir }}/{{ row.volume.id }}/BROWSE/">
												Footprints
										</a>
									{% endif %}

								</td>
							{% endif %}


							<!-- Index File -->
							{% if col == "Index File" %}
								<td headers="{{ col | slugify }} release-{{ volume.release.date | slugify}} {{ volume.release.heading | slugify}}">
										
										{% if base_dir == 'COCIRS_0xxx' or base_dir == 'COCIRS_1xxx' %}
											{% assign index_tab_name = "TSDR_INDEX.TAB" %}
										{% else %}
											{% assign index_tab_name = "index.tab" %}
										{% endif %}

										{% if volume.release.nolinks == true %}		
												{{ index_tab_name }}
										{% else %}
											<a href = "http://pds-rings.seti.org/volumes/{{ base_dir }}/{{ row.volume.id }}/index/{{ index_tab_name }}">
													{{ index_tab_name }}
											</a>
										{% endif %}
								</td>
							{% endif %}


							<!-- Spacecraft Clock (SCLK) range -->
							{% if col == "Spacecraft Clock (SCLK) range" %}
								<td headers="{{ col | slugify }} release-{{ volume.release.date | slugify}} {{ volume.release.heading | slugify}}">
									{{ row.volume.clock_range | replace: ' ', '<br>' }}
								</td>
							{% endif %}


							<!-- Date Range (UTC) -->
							{% if col == "Date Range (UTC)" %}
								<td headers="{{ col | slugify }} release-{{ volume.release.date | slugify}} {{ volume.release.heading | slugify}}">
									<span style = "white-space:nowrap">{{ row.volume.date_range | replace: ' ', '</span><br><span class = "white-space:nowrap">' }}</span>
								</td>
							{% endif %}


						{% endfor %}
					</tr>
			{% endfor %}
		</tbody>
	{% endfor %}
</table>


